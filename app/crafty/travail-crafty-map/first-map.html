<html>
<head>
  <meta charset="UTF-8">
  <meta http-equiv="pragma" content="no-cache" />
  <title>craftmap</title>
  <link rel="stylesheet" href="css/crafty.css" type="text/css" />
</head>

<body>
    <div id="container">
        <div id="scene"></div>
        <div id="menu"></div>
    </div>
    <script type="text/javascript" src="crafty.js"></script>
    <script>
        'use strict';
        //Surface de jeu
        Crafty.init(1000, 600, document.getElementById('scene'));
        //construction de la map
        var map = Crafty.e('2D, Canvas, Color').attr({
            x: 0,
            y: 0,
            w: 1000,
            h: 550
        }).color('green');
        let currentElement = null;
        var $menu = document.getElementById("menu");
        var craftyEntities =[];
        var craftySprits =[];
        //ewemples de tableau données des sprits
        var dataEntities;
        //ewemples de tableau données des sprits
        var dataSprits = [{
            src: 'img/buildings-icon.png',
            type: {
                house1: [
                    0,
                    0,
                    287,
                    100
                ]
            }
        }, {
            src: 'img/buildings-icon.png',
            type: {
                house2: [
                    800,
                    220,
                    80,
                    100
                ]
            }
        }, {
            src: 'img/buildings-icon.png',
            type: {
                house3: [
                    402,
                    121,
                    128,
                    76
                ]
            }
        }, {
            src: 'img/buildings-icon.png',
            type: {
                museum: [
                    592,
                    210,
                    208,
                    125
                ]
            }
        }, {
            src: 'img/buildings-icon.png',
            type: {
                warehouse: [
                    13,
                    545,
                    255,
                    217
                ]
            }
        }, {
            src: 'img/buildings-icon.png',
            type: {
              desk: [0,
                772,
                244,
                170
            ]
          }
        }];

        dataEntities = [
          {
            type:'house',
            name:'house1_entity',
            components:"2D,DOM,map,house1"
          },
          {
            type:'museum',
            name:'museum',
            components:"2D,DOM,map,museum"
          }
        ]


// creation  des sprit grave au tableau dataSprits
        for (let spritkey in dataSprits) {
            let sprit = dataSprits[spritkey];
            console.log(sprit);
            Crafty.sprite(sprit.src, sprit.type);
        }

      //On l'inseré dans l'entité house_entity
      /*
        var house1_entity = Crafty.e("2D,DOM,map,house1").attr({
            x: 0,
            y: 0,
            w: 287,
            h: 100
        });
        var house2_entity = Crafty.e("2D,DOM,map,house2").attr({
            x: 287,
            y: 0,
            w: 80,
            h: 100
        });
        var museum = Crafty.e("2D,DOM,map,museum").attr({
            x: 470,
            y: 0,
            w: 208,
            h: 125
        });
        var house3 = Crafty.e("2D,DOM,map,house3").attr({
            x: 700,
            y: 0,
            w: 128,
            h: 76
        });
        var house4 = Crafty.e("2D,DOM,map,house3").attr({
            x: 830,
            y: 0,
            w: 128,
            h: 76
        });
        var house5 = Crafty.e("2D,DOM,map,house3").attr({
            x: 830,
            y: 50,
            w: 128,
            h: 76
        });
        var house6 = Crafty.e("2D,DOM,map,house3").attr({
            x: 700,
            y: 50,
            w: 128,
            h: 76
        });
        var house7 = Crafty.e("2D,DOM,map,house3").attr({
            x: 700,
            y: 150,
            w: 128,
            h: 76
        });
        var house8 = Crafty.e("2D,DOM,map,house3").attr({
            x: 830,
            y: 150,
            w: 128,
            h: 76
        });
        var house9 = Crafty.e("2D,DOM,map,house3").attr({
            x: 830,
            y: 200,
            w: 128,
            h: 76
        });
        var warehouse = Crafty.e("2D,DOM,map,warehouse").attr({
            x: 0,
            y: 150,
            w: 255,
            h: 217
        });
        var desk = Crafty.e("2D,DOM,map,desk").attr({
            x: 300,
            y: 160,
            w: 244,
            h: 170
        });
        //console.log(house1_entity);
        */
        for (let entity in dataEntities){
          let entityC = dataEntities[entity];
          craftyEntities[entityC.name] = Crafty.e(entityC.components);
        }
         console.log(craftyEntities);

        //On ajute un curseur
        //   Crafty.e('2D, DOM, Color,Twoway,Gravity').attr({x:0,y:0,w:100,h:100}).color('#F00').twoway(200).gravity('Floor');
        //   //Crafty.e('2D, DOM, Color,Fourway,Gravity').attr({x:0,y:0,w:100,h:100}).color('#F00').fourway(200).gravity('Floor');
        // //On ajoute un background à la carte
        // Crafty.e('Floor,2D,Canvas,Color').attr({x:0,y:250,w:250,h:10}).color('green');
    </script>
</body>

</html>
